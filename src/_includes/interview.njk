{% extends "base.njk" %}

{% block head %}
{% if translated %}
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400..500&display=swap" rel="stylesheet">
<style>.lang-zh { font-family: 'Noto Serif SC', serif; font-weight: 450; font-size: 1.1em; }</style>
{% endif %}
{% endblock %}

{% block content %}
<main class="max-w-[680px] mx-auto px-5">

<nav class="pt-5 font-sans text-[.8rem]">
  <a href="../" class="text-link hover:underline">&larr; Back</a>
</nav>

<hr class="border-0 border-t border-rule my-7">

<article>
  <h1 class="text-2xl md:text-3xl font-bold mb-2 leading-tight">{{ heading }}</h1>
  <p class="font-sans text-[.8rem] text-muted {{ 'mb-2' if translated else 'mb-6' }}">{{ subtitle }}</p>
  {% if translated %}
  <p class="font-sans text-[.8rem] mb-6">
    <button id="lang-toggle" onclick="toggleLang()" class="text-link hover:underline cursor-pointer">Show original (中文)</button>
  </p>
  {% endif %}

  <div class="text-[1.05rem] leading-relaxed [&>:first-child]:mt-0">
    {{ content | safe }}
  </div>

  <p class="mt-8 font-sans text-[.82rem] text-muted">Interview conducted by <span class="font-bold text-emphasis">{{ interviewer }}</span></p>
</article>

</main>
{% endblock %}

{% block scripts %}
{% if translated %}
<script>
function toggleLang(){
  var btn=document.getElementById('lang-toggle');
  var zhEls=document.querySelectorAll('.lang-zh');
  var toZh=zhEls[0].classList.contains('hidden');
  zhEls.forEach(function(zh){
    zh.classList.toggle('hidden',!toZh);
    var el=zh.previousElementSibling;
    while(el){
      if(el.tagName==='H2'||(el.tagName==='P'&&el.querySelector('strong')))break;
      if(el.tagName==='P')el.classList.toggle('hidden',toZh);
      el=el.previousElementSibling;
    }
  });
  btn.textContent=toZh?'Show translation (English)':'Show original (中文)';
}
</script>
{% endif %}
{% endblock %}
